<!doctype html>
<html lang="en">
<meta charset="utf-8" />
<title>FARA entry</title>
<head>
<!-- creates the two scrolling sections -->  
<style>
    #left {
        width: 700px;
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        background: #ffa;
    }
    #right {
        margin-left: 705px;
    }
    </style>
    <style type="text/css">
     .scrollable{
        overflow: auto;
        width: 70px; 
        height: 100%; 
        border: 1px silver solid;
     }
    .scrollable select{
        border: none;
    }
    #div-1a {
     float:left;
     width:200px;
    }
    #div-1b {
     float:left;
     width:200px;
    }
    </style>

  <!-- jQuery UI Datepicker - Default functionality  Version 1 -->
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <script src="http://malsup.github.com/jquery.form.js"></script>
  <!-- change scripts to be local -->
  
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
  $(function() {
    $( "#contact_date" ).datepicker();
    $( "#disbursement_date" ).datepicker();
    $( "#payment_date" ).datepicker();
    $( "#contribution_date" ).datepicker();
    $( "#gift_date" ).datepicker();
  });
  </script>

<script type="text/javascript">
  /*<![CDATA[*/
  jQuery(document).ready(function() {
  
    var update_option = function(optionText, formID, selectID){
        jQuery(formID).find(selectID).append(optionText);
    }
    var options = {
        success: function(responseText, statusText, xhr, h){
            jQuery("#ajaxwrapper").html(responseText);

            //update_option(responseText, "#formID", "#selectid");
            //responseText looks like this: <option value="contactID">Contact Name</option>
            
        },
        error: function(jqxhr, errorText, error){
            jQuery("#ajaxwrapper").prepend('<span class="error">There was an error</span>');
            //errorText would be : <span class="error">The form didn't validate!</span>'
        },
        beforeSubmit: function(){
            jQuery("#ajaxwrapper").prepend('<span>Sending message, please wait... </span>')
        }
    }
    jQuery("#clientform").ajaxForm(options);
     
    var contact_options = {
        success: function(responseText, statusText, xhr, h){
            update_option('<option value="{{ client.id }}">{{ client.client_name }}</option>', '#contactform', '#ClientSelectId');
        } 
    }
    jQuery("#contactform").ajaxForm(contact_options);
    
      
        /*function(responseText, statusText) {
          jQuery("#sendbutton").attr('disabled', true)
          
                
            })
              /*form.attr('action') + ' #ajaxwrapper',
              form.serializeArray(),
              function(responseText, responseStatus) {
                  jQuery("#sendbutton").attr('disabled', false)
              }
          );*/
           
  });
  /*]]>*/
  </script>
  
  
</head>
<body>
<div id="left">
   <iframe height=100% width="700" scrolling="yes" src="{{ url }}"></iframe>
</div>




<div id="right">

<h1>Data entry form</h1>

<p>Reminders: <br>
    Address needs to be changed when not on local host!<br>
    Change scripts to local</p>
<p><a href="http://127.0.0.1:8000/full_list/">select a different form</a></p>
<h3>Registrant</h3>
<p><i>Section I 1(c)</i></p>
<p>Registration No = <b>{{ reg_id }}</b></p>

<!-- maybe some kind of if statement if there are not objects to pass -->

        <p> Registrant Name: <br /><b>{{ reg_object.reg_name }}</b></p>
        <p>Address: <br /><b>{{ reg_object.address }}</b><br />
        <b>{{ reg_object.city }}, {{ reg_object.state }} {{ reg_object.zip }}</b><br />
        <b>{{ reg_object.country }}</b></p>

<h3>Create Registrant:</h3>
<p>Section I</p>

<form action="{% url 'create-registrant' %}" method="GET" id="regform">
    <div id="ajaxwrapper">
    {{ reg_form.as_p }}
    <p id="sendwrapper"><input type="submit" value="Send" id="sendbutton"/></p>
    </div>
</form>

<hr />


<h3>Lobbyist</h3>
<p><i>Questions 5(a) and 5(b)</i></p>
<p>Lobbists already in system:<br>
{% for lobbyist in reg_object.lobbyists.all %}
    <li><b>{{ lobbyist }}</b></li>
{% endfor %}
</p>

<h4>Select additional lobbyists for registrant</h4>

<form method="GET" id='lobbyform' action="/registrant/add_lobbyist">
    {% csrf_token %}
    <input type="hidden" name="reg_id" value="{{ reg_id }}">
    <p><label for="lobbyists">Lobbyist: </label><select multiple="multiple" name="lobbyists">
    {% for lobbyist in all_lobbyists %}
        <option value="{{ lobbyist.id }}">{{ lobbyist.lobbyist_name }}</option>
    {% endfor %}
    </select>
    <input type="submit" /></p>
</form>

<a id="lobbyist"><h4>Add a new lobbyist</h4><a id="lobbyist">
<form method="GET" action="/lobbyist/create">
    <input type="hidden" name="reg_id" value="{{ reg_id }}">
    <p><label for="id_lobby_id">Lobby id:</label> <input id="id_lobby_id" maxlength="150" name="lobby_id" type="text" /></p>
    <p><label for="id_lobbyist_name">Lobbyist name:</label> <input id="id_lobbyist_name" maxlength="150" name="lobbyist_name" type="text" /></p>
    <p><label for="id_PAC_name">PAC name:</label> <input id="id_PAC_name" maxlength="150" name="PAC_name" type="text" /></p>
    <input type="submit" />
</form>
<hr />


<h3>Client</h3>
<p><i>Questions 7, 8, 9</i></p>

<a id="client"><p>Clients in the system for the registrant:<br></a>
{% for client in reg_object.clients.all %}
    <li>{{ client }}</li>
{% endfor %}
</p>

<form method="GET" id='clientform' action="/registrant/add_client" id='clientform'>
    {% csrf_token %}
    <input type="hidden" name="reg_id" value="{{ reg_id }}">
    <label><b>Add active client:</b></label><select multiple="multiple" name="clients">
    {% for client in all_clients %}
        {% if client 
        
        <option value="{{ client.id }}">{{ client.client_name }}</option>
    {% endfor %}
    </select>
    <input type="submit" />
</form>


<p>terminated clients, <i>(question 7)</i></p>

<p>Terminated clients in the system for the registrant:<br>
{% for clients in reg_object.terminated_clients.all %}
    <li>{{ clients }}</li>
{% endfor %}
</p>

<form method="GET" id='terminateform' action="/registrant/add_terminated">
    {% csrf_token %}
    <input type="hidden" name="reg_id" value="{{ reg_id }}">
    <label><b>Add termination:</b></label><select multiple="multiple" name="clients">
    {% for client in reg_object.clients.all %}
        <option value="{{ client.id }}">{{ client.client_name }}</option>
    {% endfor %}
    </select>
    <input type="submit" />
</form>

<h4>Add a new client to the database:</h4>
<p><i>Questions 8 and 9</i></p>
<form method="GET" action="/client/create">
    {{ client_form.as_p }}
    <input type="hidden" name="reg_id" value="{{ reg_id }}">
    <input type="submit" />
</form> 

<hr />

<h3>Contact</h3>
<p><i>Question 12</i></p>
Contacts related to this form:<br>
<ul>
{% for c in contact_list %}
<li>{{ c.0 }} {{ c.1 }} ({{ c.2 }}) {{ c.3 }}</li>
{% endfor %}
</ul>

<br><br></p>

<form method="GET" id='contactform' action="/contact/create"> 
    {% csrf_token %}
    <input type="hidden" name="reg_id" value="{{ reg_id }}">
    <input type="hidden" name="link" value="{{ url }}">

    <p><label for="clients">Clients:</label><select id='ClientSelectId' name="client">
        <option value="None">Please Select Client</option>
    {% for client in reg_object.clients.all %}
        <option value="{{ client.id }}">{{ client.client_name }}</option>
    {% endfor %}
    </select></p>

    <p><label for="recipient">Recipient (who they are meeting with):</label><select multiple="multiple" name="recipient">
    {% for recipient in all_recipients %}
        <option value="{{ recipient.id }}">{{ recipient.title }} {{ recipient.name }}, {{ recipient.agency }}</option>
    {% endfor %}
    </select></p><a href="#recip">add a new recipient</a>

    
    <p><label for="lobbyist">Lobbyists:</label><select multiple="multiple" name="lobbyist">
    {% for lobbyist in reg_object.lobbyists.all %}
        <option value="{{ lobbyist.id }}">{{ lobbyist }}</option>
    {% endfor %}
    </select></p><a href="#lobbyist">add a new lobbyist</a>

    <p><label for="date">Date: </label>
    <input id="contact_date" type="text" name="date" /></p>

    <p><label for="type">Type: </label>
        <select name="contact_type">
            <option value="P">phone</option>
            <option value="E">email</option>
            <option value="M">meeting</option>
            <option value="O">other</option>
            <option value="U">unknown</option>
        </select></p>
    
    <p><label for="description">Description: </label><br />
    <textarea cols="40" id="id_description" name="description" rows="10">
    </textarea></p>

    <input type="submit" />
</form>

<a id="recip"><h3> Add a new Recipient (person who is being contacted):</h3></a>
<p> <i>People being meet, given contributions and gifts</i></p>
<form method="GET" id='recipform' action="/recipient/create">
    {{ recipient_form.as_p }}
    
    <input type="submit" />
</form>    
<hr />



<h3>Payment</h3>
<p><i>Question 14(a)</i></p>

{% for pay in pay_list %}
        {% if pay.2 == True %}
        <li>${{ pay.1 }} from {{ pay.0 }} on {{ pay.3 }} (fee)</li>
        {% else %}
        <li>${{ pay.1 }} from {{ pay.0 }} on {{ pay.3 }}</li>
        {% endif %}
{% endfor %}

<form method="GET" id="payform" action="/payment/create">
    {% csrf_token %}
    <input type="hidden" name="reg_id" value="{{ reg_id }}">
    <input type="hidden" name="link" value="{{ url }}">
    
    <p><label for="client">Clients:</label><select multiple="multiple" name="client">
    {% for client in reg_object.clients.all %}
        <option value="{{ client.id }}">{{ client.client_name }}</option>
    {% endfor %}
    </select></p><a href="#client">add a new client</a>

    
    <p><input type="checkbox" name="fee">Fee</p>
    
    <p><label for="amount">Amount: $</label><input id="amount" type="text" name="amount" /></p> 
    
    <p><label for="description">description:</label><br \>
    <textarea name="purpose" cols="25" rows="5"></textarea></p>
    
    <p><label for="date">Date: </label>
    <input id="payment_date" type="text" name="date" /></p>
    
    <input type="submit" />
</form>

<hr />

<h3>Disbursement</h3>
<p>Question 15(a)</p>
Disbursements related to this form:
{% for dis in dis_list %}
    <li>${{ dis.1 }} {{ dis.0 }}</li>
{% endfor %}
</p>


<form method="GET" id='disform' action="/disbursement/create">
    {% csrf_token %}
    <input type="hidden" name="reg_id" value="{{ reg_id }}">
    <input type="hidden" name="link" value="{{ url }}">
    
    <p><label for="client">Clients:<br /></label><select multiple="multiple" name="client">
    {% for client in reg_object.clients.all %}
        <option value="{{ client.id }}">{{ client.client_name }}</option>
    {% endfor %}
    </select></p><a href="#client">add a new client</a>
    
    <p><label for="date">Date: <br /></label>
    <input id="disbursement_date" "text" name="date" /></p>
    
    <p><label for= "amount">Amount: <br />$</label><input id="amount" type="text" name="amount" /></p> 
    <p><lable for="purpose">Purpose: <br /><textarea name="purpose" cols="25" rows="5"></textarea></p>
    
    <input type="submit" />
</form>
<hr />


<h3>Contribution</h3>
<p><i>Question 15(c)</i></p>

{% for cont in cont_list %}
        <li>{{ cont.0 }} ${{ cont.1 }} to: {{ cont.2 }}</li>
{% endfor %}

<form method="GET" id='contform' action="/contribution/create">
    {% csrf_token %}
    <input type="hidden" name="registrant" value="{{ reg_id }}">
    <input type="hidden" name="link" value="{{ url }}">
    
    <p><label for="id_amount">Amount: $</label> 
    <input id="id_amount" name="amount" type="text" /></p>
    
    <p><label for="date">Date: </label>
    <input id="contribution_date" type="text" name="date" /></p>
    
    <p><label for="recipient">Recipient (who they are meeting with):</label><select multiple="multiple" id="input" name="recipient">
    {% for recipient in all_recipients %}
        <option value="{{ recipient.id }}">{{ recipient.title }} {{ recipient.name }}, {{ recipient.agency }}</option>
    {% endfor %}
    </select></p><a href="#recip">add a new recipient</a>

    <p><label for="lobbyist">Lobbyist or PAC:</label><select name="lobbyist">
    {% for lobbyist in reg_object.lobbyists.all %}
        <option value="{{ lobbyist.id }}">{{ lobbyist }}</option>
    {% endfor %}
    </select></p><a href="#lobbyist">add a new lobbyist or PAC</a>

    
    <input type="submit" />
</form>

<hr /> 
<h3>Gifts</h3>
<p><i>Question 14(c)</i></p>
Gifts associated with this form:

{% for g in gift_list %}
<li>{{ g.0 }} from {{ g.2 }} on {{ g.1 }}  </li>
{% endfor %} 

<form method="GET" id="giftform" action="/gift/create">
    {% csrf_token %}
    <input type="hidden" name="reg_id" value="{{ reg_id }}">
    <input type="hidden" name="link" value="{{  url }}">
    <p><label for="client">Clients:</label><select multiple="multiple" name="client">
    {% for client in reg_object.clients.all %}
        <option value="{{ client.id }}">{{ client.client_name }}</option>
    {% endfor %}
    </select></p>  <a href="#client">add a new client</a>

    
    <p><label for="date">Date: </label>
    <input id="gift_date" type="text" name= "date" /></p>
    
    <label for "purpose">Purpose: </label><br \>
    <textarea name="purpose" cols="25" rows="5"></textarea></p>
    
    <p><label for="discription">Thing of Value:</label><br \>
    <textarea name="discription" cols="25" rows="5"></textarea></p>
    
    <input type="submit" />
</form>
    
<hr />
<h3>Processing info:</h3>
Upload date: {{ meta_list.2 }}
<form method="GET" action="/metadata/create">
    {% csrf_token %}
    <input type="hidden" name="reg_id" value="{{ reg_id }}">
    <input type="hidden" name="link" value="{{  url }}">
    <input type="hidden" name="form" value="place holder">
    <input type="hidden" name="upload_date" value="place holder">
  
    {% if meta_list.0 == True %}   
        <p><input type="checkbox" name="reviewed" checked>reviewed</p>
    {% else %}  
        <p><input type="checkbox" name="reviewed">reviewed</p>
    {% endif %}
    
    {% if meta_list.1 == True %}
        <p><input type="checkbox" name="processed" checked>processed</p>
    {% else %}
        <p><input type="checkbox" name="processed">processed</p>
    {% endif %}
    
    {% if meta_list.3 == True %}
        <p><input type="checkbox" name="is_amendment" checked>is amendment</p>
    {% else %}
        <p><input type="checkbox" name="is_amendment">is amendment</p>
    {% endif %}
    
    <p><label for="notes">Notes:</label><br \>
    <textarea name="notes" cols="25" rows="5">{{ meta_list.4 }}</textarea></p>
 
 <input type="submit" />
</form>
<hr />
</div>