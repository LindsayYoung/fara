function popitup(e){newwindow=window.open(e,"name","height=800,width=650");if(window.focus){newwindow.focus()}return false}jQuery(document).ready(function(){var e={success:function(e,t,n,r){var i=e.error;if(typeof i=="undefined"){console.log(e);window.top.location.href="/supplemental_list"}else{console.log("error");var s="Error: "+e.error;alert(s)}}};$("#metaform").ajaxForm(e)});$(function(){function e(e,t){$(e).select2({minimumInputLength:2,allowClear:true,query:function(e){$.getJSON(t,{q:e.term},function(t){data={results:t};e.callback(data)})}})}function t(e,t){$(e).select2({minimumInputLength:2,allowClear:true,multiple:true,query:function(e){$.getJSON(t,{q:e.term},function(t){data={results:t};e.callback(data)})}})}$("#contact_date").datepicker();$("#disbursement_date").datepicker();$("#payment_date").datepicker();$("#contribution_date").datepicker();$("#gift_date").datepicker();$("#stamp_date").datepicker();$("#end_date").datepicker();t("#contact_recip","/formchoices/recip");t("#client_client","/formchoices/client");t("#lobbyist_lobbyist","/formchoices/lobbyist");e("#cont_recip","/formchoices/recip");e("#client_location","/formchoices/location");e("#disbursement_subcontractor","/formchoices/reg");e("#primary_contractor","/formchoices/reg");e("#payment_subcontractor","/formchoices/reg");e("#gift_recip","/formchoices/recip")});jQuery(document).ready(function(){var e={success:function(e,t,n,r){for(var i=0;i<e.length;i+=1){var s=e[i];var o=s.name;var u=s.id;var a="<option value='"+u+"'>"+o+"</option>";$("#contact_client").append(a);$("#pay_client").append(a);$("#dis_client").append(a);$("#gift_client").append(a);$("#terminated_client").append(a);var f='<p><label for="client">Clients:</label><select name="client" id="ab_client">'+a+"</option>";$("#ab_client").replaceWith(f);var l="<li>"+o+"</li>";$("#client_list").append(l);$("#clientform").each(function(){this.reset()});$("#add_clientform").each(function(){this.reset()});var c=$("#client_location");c.select2("data",null);var h=$("#location");h.select2("data",null);var p=$("#client_client");p.select2("data",null)}},error:function(e,t,n){var r="Error: "+n;alert(r)}};jQuery("#clientform").ajaxForm(e);jQuery("#add_clientform").ajaxForm(e);var t={success:function(e,t,n,r){update_option('<option value="{{ client.id }}">{{ client.client_name }}</option>',"#contactform","#contact_client")}}});jQuery(document).ready(function(){function e(){var e=$("#lobbyist_lobbyist");e.select2("data",null);console.log("running")}var t={success:function(t,n,r,i){for(var s=0;s<t.length;s+=1){var o=t[s];if(typeof o.error=="undefined"){var u=o.name;var a=o.id;console.log(u);var f="<option value='"+a+"'>"+u+"</option>";$("#contact_lobbyist").append(f);$("#cont_lobbyist").append(f);var l="<li>"+u+"</li>";$("#lobby_list").append(l);$("#lobbyform").each(function(){this.reset()});$("#add_lobbyform").each(function(){this.reset(e())})}else{var c=o.error;var h="Error: "+c;alert(h)}}},error:function(e,t,n){var r="Error: failed";alert(r)}};jQuery("#lobbyform").ajaxForm(t);jQuery("#add_lobbyform").ajaxForm(t);var n={success:function(e,t,n,r){update_option('<option value="{{ client.id }}">{{ client.client_name }}</option>',"#contactform","#contact_client")}}});var total_pay=function(){var t=0;var n=document.getElementsByClassName("pay");for(var r=0,i=n.length;r<i;r++){var s=parseFloat(n[r].innerHTML.slice(1));t+=s}var o="$"+t.toFixed(2);$("#pay_total").html(o)};var total_dis=function(){var t=0;var n=document.getElementsByClassName("dis");for(var r=0,i=n.length;r<i;r++){var s=parseFloat(n[r].innerHTML.slice(1));t+=s}var o="$"+t.toFixed(2);$("#dis_total").html(o)};jQuery(document).ready(function(){function e(e){var t={success:function(t,n,r,i){var s=t.error;if(typeof s=="undefined"){var o=t.do_not_clear;if(o=="on"){console.log("clear on")}else{$(e).each(function(){this.reset()})}if(e=="#stampform"){var u=t.date;var a=t.id;var f='<div id="stamp_list"><p>'+u+"</p><div>";console.log(f);$("#stamp_list").replaceWith(f)}if(e=="#terminatedclientform"){for(var l=0;l<t.length;l+=1){var c=t[l];var h=c.name;var a=c.id;var f="<li>"+h+"</li>";$("#terminated_client_list").append(f)}}if(e=="#contactform"){var u=t.date;var h=t.name;var p=t.contact_id;var d="/fix_contact/"+p;var v="<a class='js-popup pull-right' href= "+'"'+d+'">';var f="<li>"+h+" "+u+v+" Fix</a>"+"</li>";$("#contact_list").append(f);var m=$("#contact_recip");m.select2("data",null)}if(e=="#payform"){var g=t.amount;var u=t.date;var y=t.client;var b=t.fee;var w=t.pay_id;if(t.fee==true){var b='<span class="glyphicon glyphicon-ok"></span>'}else{var b="No"}var d="/fix_payment/"+w;var f='<tr><td class="pay">$'+g+"</td><td>"+y+"</td><td>"+u+"</td><td>"+b+'</td><td><a class="js-popup" href="'+d+'">Fix</a></td></tr>';$("#pay_table").append(f);var E=$("#payment_subcontractor");E.select2("data",null);total_pay()}if(e=="#disform"){var g=t.amount;var u=t.date;var y=t.client;var S=t.dis_id;d="/fix_disbursement/"+S;f='<tr><td class="dis">$'+g+"</td><td>"+u+"</td><td>"+y+'</td><td><a class="js-popup" href= "'+d+'">Fix</a></td></tr>';$("#dis_table").append(f);var x=$("#disbursement_subcontractor");x.select2("data",null);total_dis()}if(e=="#contform"){var g=t.amount;var T=t.lobbyist;if(T=="null"){var T=""}var N=t.recipient;var u=t.date;var C=t.cont_id;var d="/fix_contribution/"+C;var f="<tr><td>$"+g+"</td><td>"+T+"</td><td>"+N+"</td><td>"+u+'</td><td><a class="js-popup" href= "'+d+'">Fix</a></td></tr>';$("#cont_table").append(f);var k=$("#cont_recip");k.select2("data",null)}if(e=="#giftform"){var u=t.date;var y=t.client;var L=t.description;var A=t.gift_id;var d="/fix_gift/"+A;var f="<li>"+L+" from "+y+" on "+u+' <a class="js-popup pull-right" href= "'+d+'">Fix</a></li>';$("#gift_basket").append(f);var O=$("#gift_recip");O.select2("data",null)}if(e=="#descriptionform"){var L=t.description;var f="<p>Description: "+L+"</p>";$("#discription_list").replaceWith(f)}if(e=="#locationform"){var M=t.location;var f="<li>"+M+" added to locations </li>";$("#location_list").append(f)}if(e=="#recipform"){var h=t.name;var f="<p>Added: "+h+"</p>";$("#recip_list").append(f)}if(e=="#regform"){var h=t.name;var f="<p>Added: "+h+"</p>";$("#reg_list").append(f)}if(e=="#client_infoform"){var _=t.client_type;var L=t.description;var D=t.client_name;var f="<p>Client name</p>"+D+"<p>Client type: "+_+"</p><p>Description: "+L+"</p>";$("#ab_client_info").append(f)}if(e==".deleteable"){i.remove()}if(e=="#noteform"){var P=t.note;var f='<div id="note"><p> Note replaced with: '+P+"</p></div>";$("#note").replaceWith(f)}}else{console.log("error");var H="Error: "+t.error;alert(H)}},error:function(e,t,n){var r="Error: "+n;alert(r)}};$(e).ajaxForm(t)}total_pay();total_dis();e("#stampform");e("#terminatedclientform");e("#contactform");e("#recipform");e("#regform");e("#payform");e("#disform");e("#contform");e("#giftform");e("#descriptionform");e("#locationform");e("#client_infoform");e("#contact_remove_recip");e("#contact_remove_lobby");e(".deleteable");e("#noteform");e("#recipform")});jQuery(document).ready(function(){var e={success:function(e,t,n,r){var i=e.error;if(typeof i=="undefined"){window.close()}else{console.log("error");var s="Error: "+e.error;alert(s)}}};$(".fix").ajaxForm(e)})